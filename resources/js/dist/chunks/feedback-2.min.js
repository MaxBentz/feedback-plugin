(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[2],{2692:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});a(2222),a(1058),a(7327),a(1539),a(1249);var s=!1,i=!1,n={setFeedbackAuthenticatedUser:function(e,t){e.authenticatedUser=t},setFeedbackCounts:function(e,t){e.counts=t},setFeedbacks:function(e,t){e.feedbacks=e.feedbacks.concat(t)},setFeedbackItemAttributes:function(e,t){e.itemAttributes=t},setFeedbackPagination:function(e,t){e.pagination.lastPage=t.lastPage,e.pagination.isLastPage=t.isLastPage},incrementCurrentFeedbackPage:function(e){e.pagination.currentPage++},addFeedback:function(e,t){if(e.authenticatedUser.feedbacks.unshift(t),t.isVisible){var a=parseInt(t.feedbackRating.rating.ratingValue);a>0&&a<=5&&(e.counts["ratingsCountOf"+a]++,e.counts.ratingsCountTotal++,u(e))}},deleteFeedback:function(e,t){var a=t.feedbackId,s=t.parentFeedbackId,i=t.feedback;if(i.isVisible&&null===s){var n=parseInt(i.feedbackRating.rating.ratingValue);n>0&&n<=5&&(e.counts["ratingsCountOf"+n]--,e.counts.ratingsCountTotal--,u(e))}null===s?(e.feedbacks=d(e.feedbacks,a),e.authenticatedUser.feedbacks=d(e.authenticatedUser.feedbacks,a)):(e.feedbacks=l(e.feedbacks,s,a),e.authenticatedUser.feedbacks=l(e.authenticatedUser.feedbacks,s,a))}},r={loadFeedbackUser:function(e,t){var a=e.commit,s=t.data,n=t.itemId,r=t.variationId;if(!i){i=!0;var c="";return void 0!==n&&void 0!==r&&(c="/".concat(n,"/").concat(r)),$.ajax({type:"GET",url:"/rest/feedbacks/user"+c,data:s,success:function(e){a("setFeedbackAuthenticatedUser",e),i=!1},error:function(e,t,a){i=!1,console.error(a)}})}},loadFeedbackCounts:function(e,t){var a=e.commit;e.state;if(!c)return c=!0,$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/counts/"+t,success:function(e){a("setFeedbackCounts",e.counts)},error:function(e,t,a){console.error(a)}})},loadPaginatedFeedbacks:function(e,t){var a=e.commit,i=e.state,n=t.itemId,r=t.feedbacksPerPage;if(!s){s=!0;var c=$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/feedbacklist/"+n+"/"+i.pagination.currentPage,data:{feedbacksPerPage:r},success:function(e){a("setFeedbacks",e.feedbacks),a("setFeedbackItemAttributes",e.itemAttributes),a("setFeedbackPagination",e.pagination),s=!1},error:function(e,t,a){console.error(a),s=!1}});return a("incrementCurrentFeedbackPage"),c}},deleteFeedback:function(e,t){var a=e.commit,s=(e.state,t.feedbackId),i=t.parentFeedbackId,n=t.feedback;return $.ajax({type:"DELETE",url:"/rest/feedbacks/feedback/delete/"+s,success:function(e){a("deleteFeedback",{feedbackId:s,parentFeedbackId:i,feedback:n})}})}},c=!1,o={state:function(){return{authenticatedUser:{},counts:{},feedbacks:[],itemAttributes:[],pagination:{isLastPage:!0,lastPage:1,currentPage:1}}},mutations:n,actions:r,getters:{}};function d(e,t){return e.filter((function(e){return e.id!==t}))}function l(e,t,a){return e.map((function(e){return t===e.id&&(e.replies=e.replies.filter((function(e){return e.id!==a}))),e}))}function u(e){var t=0;t+=5*e.counts.ratingsCountOf5,t+=4*e.counts.ratingsCountOf4,t+=3*e.counts.ratingsCountOf3,t+=2*e.counts.ratingsCountOf2,t+=1*e.counts.ratingsCountOf1,t/=e.counts.ratingsCountTotal,e.counts.averageValue=t}var b={created:function(){this.$store.hasModule("feedback")||App.isSSR||this.$store.registerModule("feedback",o,{preserveState:!!this.$store.state.feedback})}}},2092:function(e,t,a){var s=a(9974),i=a(1702),n=a(8361),r=a(7908),c=a(6244),o=a(5417),d=i([].push),l=function(e){var t=1==e,a=2==e,i=3==e,l=4==e,u=6==e,b=7==e,f=5==e||u;return function(k,p,v,m){for(var g,h,_=r(k),F=n(_),C=s(p,v),y=c(F),w=0,$=m||o,x=t?$(k,y):a||b?$(k,0):void 0;y>w;w++)if((f||w in F)&&(h=C(g=F[w],w,_),e))if(t)x[w]=h;else if(h)switch(e){case 3:return!0;case 5:return g;case 6:return w;case 2:d(x,g)}else switch(e){case 4:return!1;case 7:d(x,g)}return u?-1:i||l?l:x}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},1194:function(e,t,a){var s=a(7293),i=a(5112),n=a(7392),r=i("species");e.exports=function(e){return n>=51||!s((function(){var t=[];return(t.constructor={})[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},7475:function(e,t,a){var s=a(3157),i=a(4411),n=a(111),r=a(5112)("species"),c=Array;e.exports=function(e){var t;return s(e)&&(t=e.constructor,(i(t)&&(t===c||s(t.prototype))||n(t)&&null===(t=t[r]))&&(t=void 0)),void 0===t?c:t}},5417:function(e,t,a){var s=a(7475);e.exports=function(e,t){return new(s(e))(0===t?0:t)}},6135:function(e,t,a){"use strict";var s=a(4948),i=a(3070),n=a(9114);e.exports=function(e,t,a){var r=s(t);r in e?i.f(e,r,n(0,a)):e[r]=a}},7207:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},9587:function(e,t,a){var s=a(614),i=a(111),n=a(7674);e.exports=function(e,t,a){var r,c;return n&&s(r=t.constructor)&&r!==a&&i(c=r.prototype)&&c!==a.prototype&&n(e,c),e}},3157:function(e,t,a){var s=a(4326);e.exports=Array.isArray||function(e){return"Array"==s(e)}},3009:function(e,t,a){var s=a(7854),i=a(7293),n=a(1702),r=a(1340),c=a(3111).trim,o=a(1361),d=s.parseInt,l=s.Symbol,u=l&&l.iterator,b=/^[+-]?0x/i,f=n(b.exec),k=8!==d(o+"08")||22!==d(o+"0x16")||u&&!i((function(){d(Object(u))}));e.exports=k?function(e,t){var a=c(r(e));return d(a,t>>>0||(f(b,a)?16:10))}:d},3111:function(e,t,a){var s=a(1702),i=a(4488),n=a(1340),r=a(1361),c=s("".replace),o="["+r+"]",d=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),u=function(e){return function(t){var a=n(i(t));return 1&e&&(a=c(a,d,"")),2&e&&(a=c(a,l,"")),a}};e.exports={start:u(1),end:u(2),trim:u(3)}},863:function(e,t,a){var s=a(1702);e.exports=s(1..valueOf)},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2222:function(e,t,a){"use strict";var s=a(2109),i=a(7293),n=a(3157),r=a(111),c=a(7908),o=a(6244),d=a(7207),l=a(6135),u=a(5417),b=a(1194),f=a(5112),k=a(7392),p=f("isConcatSpreadable"),v=k>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),m=b("concat"),g=function(e){if(!r(e))return!1;var t=e[p];return void 0!==t?!!t:n(e)};s({target:"Array",proto:!0,arity:1,forced:!v||!m},{concat:function(e){var t,a,s,i,n,r=c(this),b=u(r,0),f=0;for(t=-1,s=arguments.length;t<s;t++)if(g(n=-1===t?r:arguments[t]))for(i=o(n),d(f+i),a=0;a<i;a++,f++)a in n&&l(b,f,n[a]);else d(f+1),l(b,f++,n);return b.length=f,b}})},7327:function(e,t,a){"use strict";var s=a(2109),i=a(2092).filter;s({target:"Array",proto:!0,forced:!a(1194)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},1249:function(e,t,a){"use strict";var s=a(2109),i=a(2092).map;s({target:"Array",proto:!0,forced:!a(1194)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},9653:function(e,t,a){"use strict";var s=a(9781),i=a(7854),n=a(1702),r=a(4705),c=a(8052),o=a(2597),d=a(9587),l=a(7976),u=a(2190),b=a(7593),f=a(7293),k=a(8006).f,p=a(1236).f,v=a(3070).f,m=a(863),g=a(3111).trim,h="Number",_=i.Number,F=_.prototype,C=i.TypeError,y=n("".slice),w=n("".charCodeAt),$=function(e){var t=b(e,"number");return"bigint"==typeof t?t:x(t)},x=function(e){var t,a,s,i,n,r,c,o,d=b(e,"number");if(u(d))throw C("Cannot convert a Symbol value to a number");if("string"==typeof d&&d.length>2)if(d=g(d),43===(t=w(d,0))||45===t){if(88===(a=w(d,2))||120===a)return NaN}else if(48===t){switch(w(d,1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+d}for(r=(n=y(d,2)).length,c=0;c<r;c++)if((o=w(n,c))<48||o>i)return NaN;return parseInt(n,s)}return+d};if(r(h,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var I,R=function(e){var t=arguments.length<1?0:_($(e)),a=this;return l(F,a)&&f((function(){m(a)}))?d(Object(t),a,R):t},N=s?k(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),P=0;N.length>P;P++)o(_,I=N[P])&&!o(R,I)&&v(R,I,p(_,I));R.prototype=F,F.constructor=R,c(i,h,R,{constructor:!0})}},1058:function(e,t,a){var s=a(2109),i=a(3009);s({global:!0,forced:parseInt!=i},{parseInt:i})},3956:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("section",{staticClass:"feedback-container"},[t("div",{staticClass:"title"},[e._v("\n    "+e._s(e.$translate("Feedback::Feedback.customerReviews"))+"\n    "),t("small",{staticClass:"feedback-average-count"},[e._v(" ("+e._s(e.counts.ratingsCountTotal)+")")])]),e._v(" "),t("div",{staticClass:"feedback-stars-average"},[t("div",{staticClass:"feedback-stars-background clearfix"},e._l(5,(function(e){return t("div",{key:"feedback_stars_background"+e,staticClass:"feedback-star"},[t("i",{staticClass:"fa fa-star"})])})),0),e._v(" "),t("div",{staticClass:"feedback-stars-overlay-wrap",style:{width:100*e.counts.averageValue/5+"%"}},[t("div",{staticClass:"feedback-stars-overlay clearfix"},e._l(5,(function(e){return t("div",{key:"feedback_stars_overlay_"+e,staticClass:"feedback-star"},[t("i",{staticClass:"fa fa-star"})])})),0)])]),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"row my-2",class:e.classes,style:e.styles},[t("div",{staticClass:"col-sm-6"},[t("div",{staticClass:"feedback-bars"},[t("div",{staticClass:"feedback-bar-wrap"},[e._m(0),e._v(" "),t("div",{staticClass:"feedback-bar"},[t("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf5/e.counts.highestCount*100+"%"}})]),e._v(" "),t("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf5)+"\n          ")])]),e._v(" "),t("div",{staticClass:"feedback-bar-wrap"},[e._m(1),e._v(" "),t("div",{staticClass:"feedback-bar"},[t("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf4/e.counts.highestCount*100+"%"}})]),e._v(" "),t("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf4)+"\n          ")])]),e._v(" "),t("div",{staticClass:"feedback-bar-wrap"},[e._m(2),e._v(" "),t("div",{staticClass:"feedback-bar"},[t("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf3/e.counts.highestCount*100+"%"}})]),e._v(" "),t("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf3)+"\n          ")])]),e._v(" "),t("div",{staticClass:"feedback-bar-wrap"},[e._m(3),e._v(" "),t("div",{staticClass:"feedback-bar"},[t("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf2/e.counts.highestCount*100+"%"}})]),e._v(" "),t("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf2)+"\n          ")])]),e._v(" "),t("div",{staticClass:"feedback-bar-wrap"},[e._m(4),e._v(" "),t("div",{staticClass:"feedback-bar"},[t("div",{staticClass:"feedback-bar-fill bg-primary bg-appearance",style:{width:e.counts.ratingsCountOf1/e.counts.highestCount*100+"%"}})]),e._v(" "),t("p",{staticClass:"feedback-bar-text-after"},[e._v("\n            "+e._s(e.counts.ratingsCountOf1)+"\n          ")])])])]),e._v(" "),t("div",{staticClass:"col-sm-6"},[e.isLoading?e._e():t("feedback-form",{attrs:{"variation-id":e.variationId,options:e.optionsForm}})],1)]),e._v(" "),t("hr"),e._v(" "),t("feedback-list",{attrs:{feedbacks:e.authenticatedUser.feedbacks,"is-last-page":!0,"show-controls":!0,classes:e.classes,styles:e.styles,options:e.optionsList},on:{delete:function(t){return e.showDeleteConfirmation(t)}}}),e._v(" "),t("feedback-list",{attrs:{feedbacks:e.feedbacks,"is-last-page":e.pagination.isLastPage,"show-controls":!1,classes:e.classes,styles:e.styles,options:e.optionsList},on:{"load-more":function(t){return e.loadFeedbacks()},delete:function(t){return e.showDeleteConfirmation(t)}}}),e._v(" "),e.isLoading?t("p",{staticClass:"loading-hint"},[e._v("\n    "+e._s(e.$translate("Feedback::Feedback.loadingFeedbacks"))+"\n  ")]):e._e(),e._v(" "),t("div",{ref:"confirmDeleteModal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"feedbackConfirmDeleteLabel-"+e._uid,"aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(5),e._v(" "),t("span",{staticClass:"modal-title h5",attrs:{id:"feedbackConfirmDeleteLabel-"+e._uid}},[e._v(e._s(e.$translate("Feedback::Feedback.deleteConfirm")))])]),e._v(" "),t("div",{staticClass:"modal-body"},[e.feedbackToDelete&&e.feedbackToDelete.isReply?t("p",{staticClass:"feedback-delete-confirmation"},[e._v("\n            "+e._s(e.$translate("Feedback::Feedback.deleteReply"))+"\n          ")]):t("p",{staticClass:"feedback-delete-confirmation"},[e._v("\n            "+e._s(e.$translate("Feedback::Feedback.deleteReview"))+"\n          ")])]),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n            "+e._s(e.$translate("Feedback::Feedback.cancel"))+"\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-appearance",attrs:{type:"button"},on:{click:function(t){return e.deleteFeedback()}}},[e._v("\n            "+e._s(e.$translate("Feedback::Feedback.yesDeleteIt"))+"\n          ")])])])])])],1)};s._withStripped=!0;var i=function(){var e=this,t=e._self._c;return t("div",[e.authenticatedUser.isLoggedIn||e.options.allowGuestFeedbacks?t("div",{staticClass:"createFeedback"},[t("div",{staticClass:"stars"},[e._l([5,4,3,2,1],(function(a){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback.ratingValue,expression:"feedback.ratingValue"}],key:"star_input_"+a,class:"star star-"+a,attrs:{id:"star-"+a+e._uid,type:"radio",name:"ratingValue"+e._uid},domProps:{value:a,checked:e._q(e.feedback.ratingValue,a)},on:{change:function(t){return e.$set(e.feedback,"ratingValue",a)}}}),e._v(" "),t("label",{key:"star_label_"+a,class:"star star-"+a,attrs:{for:"star-"+a+e._uid}})]}))],2),e._v(" "),e.ratingMissing&&!e.options.allowNoRatingFeedback?t("p",{staticClass:"feedback-error alert alert-danger"},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.ratingRequired"))+"\n    ")]):e._e(),e._v(" "),!e.authenticatedUser.isLoggedIn&&e.options.allowGuestFeedbacks?t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback.authorName,expression:"feedback.authorName"}],staticClass:"form-control",attrs:{id:"author",type:"text",name:"author",placeholder:e.$translate("Feedback::Feedback.authorName"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.feedback.authorName},on:{input:function(t){t.target.composing||e.$set(e.feedback,"authorName",t.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback.honeypot,expression:"feedback.honeypot"}],staticClass:"form-control",attrs:{id:"feedback-textfield",type:"text",name:"feedback-textfield"},domProps:{value:e.feedback.honeypot},on:{input:function(t){t.target.composing||e.$set(e.feedback,"honeypot",t.target.value)}}})]):e._e(),e._v(" "),t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback.title,expression:"feedback.title"}],staticClass:"form-control",class:{"is-invalid":e.titleMissing},attrs:{id:"title",type:"text",name:"title",placeholder:e.$translate("Feedback::Feedback.title"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.feedback.title},on:{input:function(t){t.target.composing||e.$set(e.feedback,"title",t.target.value)}}}),e._v(" "),t("div",{staticClass:"invalid-feedback"},[e._v("\n        "+e._s(e.$translate("Feedback::Feedback.titleRequired"))+"\n      ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.feedback.message,expression:"feedback.message"}],staticClass:"form-control",attrs:{id:"message",name:"message",rows:"3",placeholder:e.$translate("Feedback::Feedback.reviewMessage"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.feedback.message},on:{input:function(t){t.target.composing||e.$set(e.feedback,"message",t.target.value)}}})]),e._v(" "),e.authenticatedUser.limitReached?t("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"feedback-tooltip-wrapper",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.maximumNumberOfFeedbacksReached")}},[t("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:""}},[e._v("\n        "+e._s(e.$translate("Feedback::Feedback.submitReview"))+"\n      ")])]):e.authenticatedUser.hasPurchased?t("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:e.isLoading},on:{click:function(t){return e.createFeedback()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.submitReview"))+"\n    ")]):t("div",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"feedback-tooltip-wrapper",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.errorDoesntOwnProduct")}},[t("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:""}},[e._v("\n        "+e._s(e.$translate("Feedback::Feedback.submitReview"))+"\n      ")])])]):t("div",[t("div",{staticClass:"alert alert-info"},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.logInCustomerReviews"))+"\n    ")]),e._v(" "),t("a",{staticClass:"btn btn-primary btn-appearance",attrs:{"data-toggle":"modal",href:"#login"},on:{click:function(t){return e.createLoginModal()}}},[t("span",[e._v(e._s(e.$translate("Feedback::Feedback.login")))]),e._v(" "),t("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})])])])};i._withStripped=!0;a(9653);var n={name:"FeedbackForm",props:{variationId:Number,options:Object},data:function(){return{feedback:{ratingValue:0,authorName:"",title:"",message:"",type:"review",targetId:this.variationId,honeypot:""},isLoading:!1,titleMissing:!1,ratingMissing:!1}},computed:{authenticatedUser:function(){return this.$store.state.feedback.authenticatedUser}},methods:{createFeedback:function(){var e=this;this.isLoading||this.feedback.honeypot.length>0||(!this.options.allowNoRatingFeedback&&this.feedback.ratingValue<=0?this.ratingMissing=!0:this.feedback.title?(this.isLoading=!0,this.feedback.options=this.options,$.ajax({type:"POST",url:"/rest/feedbacks/feedback/create",data:this.feedback,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){e.$store.commit("addFeedback",t),e.isLoading=!1,e.feedback.authorName="",e.feedback.message="",e.feedback.title="",e.feedback.ratingValue=0,e.titleMissing=!1,e.ratingMissing=!1},error:function(t,a,s){console.error(s),e.isLoading=!1}})):this.titleMissing=!0)},createLoginModal:function(){this.$store.dispatch("loadComponent","login-modal")}}},r=a(1900),c=(0,r.Z)(n,i,[],!1,null,null,null).exports,o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback-list"},[e._l(e.feedbacks,(function(a){return t("feedback-list-entry",{key:a.id,attrs:{feedback:a,"is-reply":!1,"show-controls":e.showControls,classes:e.classes,styles:e.styles,options:e.options},on:{delete:function(t){return e.$emit("delete",t)}}})})),e._v(" "),e.isLastPage?e._e():t("a",{staticClass:"btn btn-default btn-block feedback-loadmore",on:{click:function(t){return e.onLoadMoreClicked()}}},[e._v("\n    "+e._s(e.$translate("Feedback::Feedback.loadMore"))+"\n  ")])],2)};o._withStripped=!0;var d={name:"FeedbackList",components:{"feedback-list-entry":a(9655).Z},props:{feedbacks:Array,isLastPage:Boolean,showControls:Boolean,classes:String,styles:String,options:Object},methods:{onLoadMoreClicked:function(){this.$emit("load-more")}}},l={name:"FeedbackContainer",components:{"feedback-form":c,"feedback-list":(0,r.Z)(d,o,[],!1,null,null,null).exports},mixins:[a(2692).Z],inject:{itemId:{default:null}},props:{options:Object,classes:String,styles:String},data:function(){return{isLoading:!0,feedbackToDelete:null,optionsList:{timestampVisibility:this.options.timestampVisibility,allowGuestFeedbacks:this.options.allowGuestFeedbacks},optionsForm:{allowFeedbacksOnlyIfPurchased:this.options.allowFeedbacksOnlyIfPurchased,allowNoRatingFeedback:this.options.allowNoRatingFeedback,numberOfFeedbacks:this.options.numberOfFeedbacks,allowGuestFeedbacks:this.options.allowGuestFeedbacks}}},computed:{currentVariation:function(){return this.$store.getters[this.itemId+"/currentItemVariation"]},variationId:function(){return this.currentVariation&&this.currentVariation.variation.id},authenticatedUser:function(){return this.$store.state.feedback.authenticatedUser},counts:function(){return this.$store.state.feedback.counts},feedbacks:function(){return this.$store.state.feedback.feedbacks},pagination:function(){return this.$store.state.feedback.pagination}},mounted:function(){if(App.isShopBuilder)this.isLoading=!1;else{var e=this;$.when(this.getUser(),this.getCounts(),this.loadFeedbacks()).done((function(){e.isLoading=!1,Vue.nextTick((function(){window.dispatchEvent(new Event("resize"))}))}))}},methods:{getUser:function(){return this.$store.dispatch("loadFeedbackUser",{data:{allowFeedbacksOnlyIfPurchased:this.options.allowFeedbacksOnlyIfPurchased,numberOfFeedbacks:this.options.numberOfFeedbacks},itemId:this.itemId,variationId:this.variationId})},getCounts:function(){return this.$store.dispatch("loadFeedbackCounts",this.itemId)},loadFeedbacks:function(){return this.$store.dispatch("loadPaginatedFeedbacks",{itemId:this.itemId,feedbacksPerPage:this.options.feedbacksPerPage})},showDeleteConfirmation:function(e){this.feedbackToDelete=e,$(this.$refs.confirmDeleteModal).modal("show")},deleteFeedback:function(){if(null!==this.feedbackToDelete){var e=this.feedbackToDelete.feedbackId,t=this.feedbackToDelete.parentFeedbackId;this.$store.dispatch("deleteFeedback",{feedbackId:e,parentFeedbackId:t,feedback:this.feedbackToDelete.feedbackObject})}$(this.$refs.confirmDeleteModal).modal("hide")}}},u=(0,r.Z)(l,s,[function(){var e=this._self._c;return e("p",{staticClass:"feedback-bar-text-before"},[this._v("\n            5 "),e("i",{staticClass:"fa fa-star"})])},function(){var e=this._self._c;return e("p",{staticClass:"feedback-bar-text-before"},[this._v("\n            4 "),e("i",{staticClass:"fa fa-star"})])},function(){var e=this._self._c;return e("p",{staticClass:"feedback-bar-text-before"},[this._v("\n            3 "),e("i",{staticClass:"fa fa-star"})])},function(){var e=this._self._c;return e("p",{staticClass:"feedback-bar-text-before"},[this._v("\n            2 "),e("i",{staticClass:"fa fa-star"})])},function(){var e=this._self._c;return e("p",{staticClass:"feedback-bar-text-before"},[this._v("\n            1 "),e("i",{staticClass:"fa fa-star"})])},function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports},9655:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback clearfix",class:{loading:e.isLoading}},[!e.editableFeedback&&e.showControls?t("div",{staticClass:"feedback-options"},[e.feedbackData.isVisible?e._e():t("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"btn-sm btn-danger",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.moderationMessage")}},[t("i",{staticClass:"fa fa-eye-slash"})]),e._v(" "),e.authenticatedUser.isLoggedIn?t("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],ref:"editButton",staticClass:"btn btn-sm btn-danger",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.isReply?e.$translate("Feedback::Feedback.editReply"):e.$translate("Feedback::Feedback.editReview")},on:{click:function(t){return e.editFeedback()}}},[t("i",{staticClass:"fa fa-pencil"})]):e._e(),e._v(" "),e.authenticatedUser.isLoggedIn?t("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"btn btn-sm btn-danger",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.isReply?e.$translate("Feedback::Feedback.deleteReply"):e.$translate("Feedback::Feedback.deleteReview")},on:{click:function(t){return e.showDeleteConfirmation()}}},[t("i",{staticClass:"fa fa-trash-o"})]):e._e()]):e._e(),e._v(" "),e.editableFeedback?e._e():t("feedback-comment",{attrs:{feedback:e.feedbackData,"is-reply":e.isReply,"show-controls":e.showControls,classes:e.classes,styles:e.styles,options:e.options},on:{delete:function(t){return e.$emit("delete",t)}}}),e._v(" "),e.editableFeedback&&e.isReply?t("div",[t("div",{staticClass:"form-group"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editableFeedback.message,expression:"editableFeedback.message"}],staticClass:"form-control",attrs:{rows:"3",placeholder:e.$translate("Feedback::Feedback.replyMessage")},domProps:{value:e.editableFeedback.message},on:{input:function(t){t.target.composing||e.$set(e.editableFeedback,"message",t.target.value)}}})]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-appearance",on:{click:function(t){return e.saveEditableFeedback()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.editReply"))+"\n    ")]),e._v(" "),t("button",{staticClass:"btn btn-secondary feedback-edit-cancel",on:{click:function(t){e.editableFeedback=null}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.cancel"))+"\n    ")])]):e._e(),e._v(" "),e.editableFeedback&&!e.isReply?t("div",[t("div",{staticClass:"stars"},[e._l(5,(function(a){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editableFeedback.ratingValue,expression:"editableFeedback.ratingValue"}],key:"stars_input_"+a,class:"star star-"+a,attrs:{id:"star-"+e._uid+"-"+a,type:"radio",name:"ratingValue"},domProps:{value:a,checked:e._q(e.editableFeedback.ratingValue,a)},on:{change:function(t){return e.$set(e.editableFeedback,"ratingValue",a)}}}),e._v(" "),t("label",{key:"stars_label_"+a,class:"star star-"+a,attrs:{for:"star-"+e._uid+"-"+a}})]}))],2),e._v(" "),t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editableFeedback.title,expression:"editableFeedback.title"}],staticClass:"form-control",attrs:{type:"text",name:"title",placeholder:e.$translate("Feedback::Feedback.title"),required:""},domProps:{value:e.editableFeedback.title},on:{input:function(t){t.target.composing||e.$set(e.editableFeedback,"title",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editableFeedback.message,expression:"editableFeedback.message"}],staticClass:"form-control",attrs:{name:"message",rows:"3",placeholder:e.$translate("Feedback::Feedback.title")},domProps:{value:e.editableFeedback.message},on:{input:function(t){t.target.composing||e.$set(e.editableFeedback,"message",t.target.value)}}})]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-appearance",on:{click:function(t){return e.saveEditableFeedback()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.editReview"))+"\n    ")]),e._v(" "),t("button",{staticClass:"btn btn-secondary feedback-edit-cancel",on:{click:function(t){e.editableFeedback=null}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.cancel"))+"\n    ")])]):e._e()],1)};s._withStripped=!0;a(6992),a(1539),a(8674),a(8783),a(3948),a(1058);var i={name:"FeedbackListEntry",components:{"feedback-comment":function(){return a.e(4).then(a.bind(a,3038))}},props:{feedback:Object,isReply:Boolean,showControls:Boolean,classes:String,styles:String,options:Object},data:function(){return{editableFeedback:null,isLoading:!1,feedbackData:{}}},computed:{authenticatedUser:function(){return this.$store.state.feedback.authenticatedUser}},created:function(){this.feedbackData=this.feedback},methods:{showDeleteConfirmation:function(){var e=null;this.isReply&&(e=parseInt(this.feedbackData.targetRelation.feedbackRelationTargetId)),this.$emit("delete",{feedbackId:this.feedbackData.id,isReply:this.isReply,parentFeedbackId:e,feedbackObject:this.feedbackData})},editFeedback:function(){null===this.editableFeedback&&($(this.$refs.editButton).tooltip("dispose"),this.editableFeedback={title:"",message:this.feedbackData.feedbackComment.comment.message,ratingValue:-1,isReply:this.isReply},this.isReply||(this.editableFeedback.title=this.feedbackData.title,this.editableFeedback.ratingValue=this.feedbackData.feedbackRating.rating.ratingValue))},saveEditableFeedback:function(){var e=this;if(null!==this.editableFeedback){var t=this.editableFeedback,a={message:t.message};t.isReply||(a.title=t.title,a.ratingValue=t.ratingValue),this.isLoading=!0,$.ajax({type:"PUT",url:"/rest/feedbacks/feedback/update/"+this.feedback.id,data:a,success:function(a){e.feedbackData.feedbackComment.comment.message=t.message,e.feedbackData.isVisible=a.isVisible,t.isReply||(e.feedbackData.title=t.title,e.feedbackData.feedbackRating.rating.ratingValue=t.ratingValue),e.isLoading=!1},error:function(t,a,s){console.error(s),e.isLoading=!1}})}this.editableFeedback=null}}},n=(0,a(1900).Z)(i,s,[],!1,null,null,null).exports},1900:function(e,t,a){"use strict";function s(e,t,a,s,i,n,r,c){var o,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=a,d._compiled=!0),s&&(d.functional=!0),n&&(d._scopeId="data-v-"+n),r?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=o):i&&(o=c?function(){i.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:i),o)if(d.functional){d._injectStyles=o;var l=d.render;d.render=function(e,t){return o.call(t),l(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:d}}a.d(t,{Z:function(){return s}})}}]);
//# sourceMappingURL=feedback-2.min.js.map