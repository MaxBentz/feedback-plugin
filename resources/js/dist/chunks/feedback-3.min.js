(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[3],{2692:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});n(2222),n(1058),n(7327),n(1539),n(1249);var r=!1,a=!1,s={setFeedbackAuthenticatedUser:function(e,t){e.authenticatedUser=t},setFeedbackCounts:function(e,t){e.counts=t},setFeedbacks:function(e,t){e.feedbacks=e.feedbacks.concat(t)},setFeedbackItemAttributes:function(e,t){e.itemAttributes=t},setFeedbackPagination:function(e,t){e.pagination.lastPage=t.lastPage,e.pagination.isLastPage=t.isLastPage},incrementCurrentFeedbackPage:function(e){e.pagination.currentPage++},addFeedback:function(e,t){if(e.authenticatedUser.feedbacks.unshift(t),t.isVisible){var n=parseInt(t.feedbackRating.rating.ratingValue);n>0&&n<=5&&(e.counts["ratingsCountOf"+n]++,e.counts.ratingsCountTotal++,d(e))}},deleteFeedback:function(e,t){var n=t.feedbackId,r=t.parentFeedbackId,a=t.feedback;if(a.isVisible&&null===r){var s=parseInt(a.feedbackRating.rating.ratingValue);s>0&&s<=5&&(e.counts["ratingsCountOf"+s]--,e.counts.ratingsCountTotal--,d(e))}null===r?(e.feedbacks=u(e.feedbacks,n),e.authenticatedUser.feedbacks=u(e.authenticatedUser.feedbacks,n)):(e.feedbacks=f(e.feedbacks,r,n),e.authenticatedUser.feedbacks=f(e.authenticatedUser.feedbacks,r,n))}},i={loadFeedbackUser:function(e,t){var n=e.commit,r=t.data,s=t.itemId,i=t.variationId;if(!a){a=!0;var o="";return void 0!==s&&void 0!==i&&(o="/".concat(s,"/").concat(i)),$.ajax({type:"GET",url:"/rest/feedbacks/user"+o,data:r,success:function(e){n("setFeedbackAuthenticatedUser",e),a=!1},error:function(e,t,n){a=!1,console.error(n)}})}},loadFeedbackCounts:function(e,t){var n=e.commit;e.state;if(!o)return o=!0,$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/counts/"+t,success:function(e){n("setFeedbackCounts",e.counts)},error:function(e,t,n){console.error(n)}})},loadPaginatedFeedbacks:function(e,t){var n=e.commit,a=e.state,s=t.itemId,i=t.feedbacksPerPage;if(!r){r=!0;var o=$.ajax({type:"GET",url:"/rest/feedbacks/feedback/helper/feedbacklist/"+s+"/"+a.pagination.currentPage,data:{feedbacksPerPage:i},success:function(e){n("setFeedbacks",e.feedbacks),n("setFeedbackItemAttributes",e.itemAttributes),n("setFeedbackPagination",e.pagination),r=!1},error:function(e,t,n){console.error(n),r=!1}});return n("incrementCurrentFeedbackPage"),o}},deleteFeedback:function(e,t){var n=e.commit,r=(e.state,t.feedbackId),a=t.parentFeedbackId,s=t.feedback;return $.ajax({type:"DELETE",url:"/rest/feedbacks/feedback/delete/"+r,success:function(e){n("deleteFeedback",{feedbackId:r,parentFeedbackId:a,feedback:s})}})}},o=!1,c={state:function(){return{authenticatedUser:{},counts:{},feedbacks:[],itemAttributes:[],pagination:{isLastPage:!0,lastPage:1,currentPage:1}}},mutations:s,actions:i,getters:{}};function u(e,t){return e.filter((function(e){return e.id!==t}))}function f(e,t,n){return e.map((function(e){return t===e.id&&(e.replies=e.replies.filter((function(e){return e.id!==n}))),e}))}function d(e){var t=0;t+=5*e.counts.ratingsCountOf5,t+=4*e.counts.ratingsCountOf4,t+=3*e.counts.ratingsCountOf3,t+=2*e.counts.ratingsCountOf2,t+=1*e.counts.ratingsCountOf1,t/=e.counts.ratingsCountTotal,e.counts.averageValue=t}var l={created:function(){this.$store.hasModule("feedback")||App.isSSR||this.$store.registerModule("feedback",c,{preserveState:!!this.$store.state.feedback})}}},1285:function(e,t,n){"use strict";var r=n(7908),a=n(1400),s=n(6244);e.exports=function(e){for(var t=r(this),n=s(t),i=arguments.length,o=a(i>1?arguments[1]:void 0,n),c=i>2?arguments[2]:void 0,u=void 0===c?n:a(c,n);u>o;)t[o++]=e;return t}},2092:function(e,t,n){var r=n(9974),a=n(1702),s=n(8361),i=n(7908),o=n(6244),c=n(5417),u=a([].push),f=function(e){var t=1==e,n=2==e,a=3==e,f=4==e,d=6==e,l=7==e,p=5==e||d;return function(v,b,g,k){for(var h,m,x=i(v),C=s(x),y=r(b,g),_=o(C),F=0,A=k||c,w=t?A(v,_):n||l?A(v,0):void 0;_>F;F++)if((p||F in C)&&(m=y(h=C[F],F,x),e))if(t)w[F]=m;else if(m)switch(e){case 3:return!0;case 5:return h;case 6:return F;case 2:u(w,h)}else switch(e){case 4:return!1;case 7:u(w,h)}return d?-1:a||f?f:w}};e.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},1194:function(e,t,n){var r=n(7293),a=n(5112),s=n(7392),i=a("species");e.exports=function(e){return s>=51||!r((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:function(e,t,n){"use strict";var r=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},7475:function(e,t,n){var r=n(3157),a=n(4411),s=n(111),i=n(5112)("species"),o=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(a(t)&&(t===o||r(t.prototype))||s(t)&&null===(t=t[i]))&&(t=void 0)),void 0===t?o:t}},5417:function(e,t,n){var r=n(7475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},6135:function(e,t,n){"use strict";var r=n(4948),a=n(3070),s=n(9114);e.exports=function(e,t,n){var i=r(t);i in e?a.f(e,i,s(0,n)):e[i]=n}},7207:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},3009:function(e,t,n){var r=n(7854),a=n(7293),s=n(1702),i=n(1340),o=n(3111).trim,c=n(1361),u=r.parseInt,f=r.Symbol,d=f&&f.iterator,l=/^[+-]?0x/i,p=s(l.exec),v=8!==u(c+"08")||22!==u(c+"0x16")||d&&!a((function(){u(Object(d))}));e.exports=v?function(e,t){var n=o(i(e));return u(n,t>>>0||(p(l,n)?16:10))}:u},3111:function(e,t,n){var r=n(1702),a=n(4488),s=n(1340),i=n(1361),o=r("".replace),c="["+i+"]",u=RegExp("^"+c+c+"*"),f=RegExp(c+c+"*$"),d=function(e){return function(t){var n=s(a(t));return 1&e&&(n=o(n,u,"")),2&e&&(n=o(n,f,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2222:function(e,t,n){"use strict";var r=n(2109),a=n(7293),s=n(3157),i=n(111),o=n(7908),c=n(6244),u=n(7207),f=n(6135),d=n(5417),l=n(1194),p=n(5112),v=n(7392),b=p("isConcatSpreadable"),g=v>=51||!a((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),k=l("concat"),h=function(e){if(!i(e))return!1;var t=e[b];return void 0!==t?!!t:s(e)};r({target:"Array",proto:!0,arity:1,forced:!g||!k},{concat:function(e){var t,n,r,a,s,i=o(this),l=d(i,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(h(s=-1===t?i:arguments[t]))for(a=c(s),u(p+a),n=0;n<a;n++,p++)n in s&&f(l,p,s[n]);else u(p+1),f(l,p++,s);return l.length=p,l}})},3290:function(e,t,n){var r=n(2109),a=n(1285),s=n(1223);r({target:"Array",proto:!0},{fill:a}),s("fill")},7327:function(e,t,n){"use strict";var r=n(2109),a=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},2772:function(e,t,n){"use strict";var r=n(2109),a=n(1702),s=n(1318).indexOf,i=n(9341),o=a([].indexOf),c=!!o&&1/o([1],1,-0)<0,u=i("indexOf");r({target:"Array",proto:!0,forced:c||!u},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?o(this,e,t)||0:s(this,e,t)}})},1249:function(e,t,n){"use strict";var r=n(2109),a=n(2092).map;r({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},1058:function(e,t,n){var r=n(2109),a=n(3009);r({global:!0,forced:parseInt!=a},{parseInt:a})},1336:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});n(3290);var r=function(){var e=this,t=e._self._c;return t("div",[e.showEmptyRatings||e.counts.averageValue>0?t("div",{staticClass:"feedback-stars-average",class:e.size},[t("div",{staticClass:"feedback-stars-background clearfix"},e._l(5,(function(e){return t("div",{key:"star_background_"+e,staticClass:"feedback-star"},[t("i",{staticClass:"fa fa-star"})])})),0),e._v(" "),t("div",{staticClass:"feedback-stars-overlay-wrap",style:{width:e.fill}},[t("div",{staticClass:"feedback-stars-overlay clearfix"},e._l(5,(function(e){return t("div",{key:"star_overlay_"+e,staticClass:"feedback-star"},[t("i",{staticClass:"fa fa-star"})])})),0)])]):e._e(),e._v(" "),e.showRatingsAmount&&(e.showEmptyRatings||e.counts.averageValue>0)?t("span",{class:e.size},[t("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.scrollTo.apply(null,arguments)}}},[e._v("("+e._s(e.counts.ratingsCountTotal)+")")])]):e._e()])};r._withStripped=!0;n(2772);var a={name:"FeedbackAverage",mixins:[n(2692).Z],inject:{itemId:{default:null}},props:{showEmptyRatings:Boolean,sizeOfStars:{type:String,default:"small"},showRatingsAmount:Boolean},computed:{fill:function(){var e=100*this.counts.averageValue/5;return e+="%"},size:function(){return-1!==this.sizeOfStars.indexOf("-stars")?this.sizeOfStars:this.sizeOfStars+"-stars"},counts:function(){return this.$store.state.feedback.counts}},mounted:function(){App.isShopBuilder||this.getAverage()},methods:{getAverage:function(){this.$store.dispatch("loadFeedbackCounts",this.itemId)},scrollTo:function(){var e=document.querySelector("[data-feedback]"),t=document.querySelector("#vue-app").offsetTop;if(e){for(;(!e.clientHeight||!e.classList.contains("widget"))&&e.parentElement;)e=e.parentElement;if(e){var n=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:n,behavior:"smooth"})}}}}},s=(0,n(1900).Z)(a,r,[],!1,null,null,null).exports},1900:function(e,t,n){"use strict";function r(e,t,n,r,a,s,i,o){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=c):a&&(c=o?function(){a.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var f=u.render;u.render=function(e,t){return c.call(t),f(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,{Z:function(){return r}})}}]);
//# sourceMappingURL=feedback-3.min.js.map