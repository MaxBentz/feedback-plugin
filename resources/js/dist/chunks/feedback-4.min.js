(self.webpackChunkplentymarkets_feedback=self.webpackChunkplentymarkets_feedback||[]).push([[4],{1530:function(e,t,a){"use strict";var n=a(8710).charAt;e.exports=function(e,t,a){return t+(a?n(e,t).length:1)}},1589:function(e,t,a){var n=a(1400),s=a(6244),i=a(6135),r=Array,l=Math.max;e.exports=function(e,t,a){for(var o=s(e),c=n(t,o),u=n(void 0===a?o:a,o),d=r(l(u-c,0)),f=0;c<u;c++,f++)i(d,f,e[c]);return d.length=f,d}},7007:function(e,t,a){"use strict";a(4916);var n=a(1702),s=a(8052),i=a(2261),r=a(7293),l=a(5112),o=a(8880),c=l("species"),u=RegExp.prototype;e.exports=function(e,t,a,d){var f=l(e),p=!r((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),b=p&&!r((function(){var t=!1,a=/a/;return"split"===e&&((a={}).constructor={},a.constructor[c]=function(){return a},a.flags="",a[f]=/./[f]),a.exec=function(){return t=!0,null},a[f](""),!t}));if(!p||!b||a){var g=n(/./[f]),m=t(f,""[e],(function(e,t,a,s,r){var l=n(e),o=t.exec;return o===i||o===u.exec?p&&!r?{done:!0,value:g(t,a,s)}:{done:!0,value:l(a,t,s)}:{done:!1}}));s(String.prototype,e,m[0]),s(u,f,m[1])}d&&o(u[f],"sham",!0)}},7850:function(e,t,a){var n=a(111),s=a(4326),i=a(5112)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==s(e))}},7651:function(e,t,a){var n=a(6916),s=a(9670),i=a(614),r=a(4326),l=a(2261),o=TypeError;e.exports=function(e,t){var a=e.exec;if(i(a)){var c=n(a,e,t);return null!==c&&s(c),c}if("RegExp"===r(e))return n(l,e,t);throw o("RegExp#exec called on incompatible receiver")}},2261:function(e,t,a){"use strict";var n,s,i=a(6916),r=a(1702),l=a(1340),o=a(7066),c=a(2999),u=a(2309),d=a(30),f=a(9909).get,p=a(9441),b=a(7168),g=u("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,v=m,h=r("".charAt),k=r("".indexOf),y=r("".replace),x=r("".slice),_=(s=/b*/g,i(m,n=/a/,"a"),i(m,s,"a"),0!==n.lastIndex||0!==s.lastIndex),R=c.BROKEN_CARET,C=void 0!==/()??/.exec("")[1];(_||C||R||p||b)&&(v=function(e){var t,a,n,s,r,c,u,p=this,b=f(p),D=l(e),I=b.raw;if(I)return I.lastIndex=p.lastIndex,t=i(v,I,D),p.lastIndex=I.lastIndex,t;var F=b.groups,w=R&&p.sticky,N=i(o,p),A=p.source,E=0,V=D;if(w&&(N=y(N,"y",""),-1===k(N,"g")&&(N+="g"),V=x(D,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==h(D,p.lastIndex-1))&&(A="(?: "+A+")",V=" "+V,E++),a=new RegExp("^(?:"+A+")",N)),C&&(a=new RegExp("^"+A+"$(?!\\s)",N)),_&&(n=p.lastIndex),s=i(m,w?a:p,V),w?s?(s.input=x(s.input,E),s[0]=x(s[0],E),s.index=p.lastIndex,p.lastIndex+=s[0].length):p.lastIndex=0:_&&s&&(p.lastIndex=p.global?s.index+s[0].length:n),C&&s&&s.length>1&&i(g,s[0],a,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(s[r]=void 0)})),s&&F)for(s.groups=c=d(null),r=0;r<F.length;r++)c[(u=F[r])[0]]=s[u[1]];return s}),e.exports=v},7066:function(e,t,a){"use strict";var n=a(9670);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},2999:function(e,t,a){var n=a(7293),s=a(7854).RegExp,i=n((function(){var e=s("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),r=i||n((function(){return!s("a","y").sticky})),l=i||n((function(){var e=s("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:l,MISSED_STICKY:r,UNSUPPORTED_Y:i}},9441:function(e,t,a){var n=a(7293),s=a(7854).RegExp;e.exports=n((function(){var e=s(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,t,a){var n=a(7293),s=a(7854).RegExp;e.exports=n((function(){var e=s("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},9826:function(e,t,a){"use strict";var n=a(2109),s=a(2092).find,i=a(1223),r="find",l=!0;r in[]&&Array(1).find((function(){l=!1})),n({target:"Array",proto:!0,forced:l},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i(r)},4916:function(e,t,a){"use strict";var n=a(2109),s=a(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},3123:function(e,t,a){"use strict";var n=a(2104),s=a(6916),i=a(1702),r=a(7007),l=a(7850),o=a(9670),c=a(4488),u=a(6707),d=a(1530),f=a(7466),p=a(1340),b=a(8173),g=a(1589),m=a(7651),v=a(2261),h=a(2999),k=a(7293),y=h.UNSUPPORTED_Y,x=4294967295,_=Math.min,R=[].push,C=i(/./.exec),D=i(R),I=i("".slice),F=!k((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));r("split",(function(e,t,a){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var i=p(c(this)),r=void 0===a?x:a>>>0;if(0===r)return[];if(void 0===e)return[i];if(!l(e))return s(t,i,e,r);for(var o,u,d,f=[],b=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,h=new RegExp(e.source,b+"g");(o=s(v,h,i))&&!((u=h.lastIndex)>m&&(D(f,I(i,m,o.index)),o.length>1&&o.index<i.length&&n(R,f,g(o,1)),d=o[0].length,m=u,f.length>=r));)h.lastIndex===o.index&&h.lastIndex++;return m===i.length?!d&&C(h,"")||D(f,""):D(f,I(i,m)),f.length>r?g(f,0,r):f}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:s(t,this,e,a)}:t,[function(t,a){var n=c(this),r=null==t?void 0:b(t,e);return r?s(r,t,n,a):s(i,p(n),t,a)},function(e,n){var s=o(this),r=p(e),l=a(i,s,r,n,i!==t);if(l.done)return l.value;var c=u(s,RegExp),b=s.unicode,g=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(y?"g":"y"),v=new c(y?"^(?:"+s.source+")":s,g),h=void 0===n?x:n>>>0;if(0===h)return[];if(0===r.length)return null===m(v,r)?[r]:[];for(var k=0,R=0,C=[];R<r.length;){v.lastIndex=y?0:R;var F,w=m(v,y?I(r,R):r);if(null===w||(F=_(f(v.lastIndex+(y?R:0)),r.length))===k)R=d(r,R,b);else{if(D(C,I(r,k,R)),C.length===h)return C;for(var N=1;N<=w.length-1;N++)if(D(C,w[N]),C.length===h)return C;R=k=F}}return D(C,I(r,k)),C}]}),!F,y)},3038:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback-comment",class:e.classes,style:e.styles},[e.isReply?e._e():t("div",[t("p",{staticClass:"feedback-comment-title"},[e._v("\n      "+e._s(e.feedbackData.title)+"\n    ")]),e._v(" "),e.feedbackData.feedbackRating.rating.ratingValue>0?t("div",{staticClass:"feedback-rating"},e._l(5,(function(a){return t("i",{key:"feedback_rating_"+a,staticClass:"fa fa-star",class:{full:e.feedbackData.feedbackRating.rating.ratingValue>=a,empty:e.feedbackData.feedbackRating.rating.ratingValue<a}})})),0):e._e(),e._v(" "),t("div",{staticClass:"feedback-attributes-list"},[t("p",[e.isPurchased?t("span",{staticClass:"feedback-verified-tag"},[e._v("\n          "+e._s(e.$translate("Feedback::Feedback.verifiedPurchase"))+"\n        ")]):e._e(),e._v(" "),e._l(e.variationAttributes,(function(a,n){return t("span",{key:"feedback_attributes_"+n,staticClass:"feedback-attributes"},[e._v("\n          "+e._s(a.name)+": "+e._s(a.value)+"\n        ")])}))],2)])]),e._v(" "),t("p",{staticClass:"feedback-comment-text",domProps:{textContent:e._s(e.message)}}),e._v(" "),t("p",{staticClass:"feedback-info"},[t("span",{staticClass:"feedback-info-segment"},[t("strong",["user"===e.feedbackData.sourceRelation[0].feedbackRelationType?t("span",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"feedback-admin",attrs:{"data-toggle":"tooltip","data-placement":"top","data-original-title":e.$translate("Feedback::Feedback.shopManagerLabel")}},[t("i",{staticClass:"fa fa-check-square"}),e._v("\n          "+e._s(e.feedbackData.sourceRelation[0].sourceRelationLabel)+"\n        ")]):0==e.feedbackData.sourceRelation[0].feedbackRelationSourceId&&e.feedback.authorName.length>0?t("span",[e._v("\n          "+e._s(e.feedbackData.authorName)+"\n        ")]):0==e.feedbackData.sourceRelation[0].feedbackRelationSourceId?t("span",[e._v("\n          "+e._s(e.$translate("Feedback::Feedback.guestName"))+"\n        ")]):t("span",[e._v("\n          "+e._s(e.displayName)+"\n        ")])])]),e._v(" "),e.options.timestampVisibility?t("span",{staticClass:"feedback-info-segment"},[t("i",{staticClass:"fa fa-calendar text-muted"}),e._v("\n      "+e._s(e._f("date")(e.feedbackData.createdAt,e.$translate("Ceres::Template.devDateFormatMoment")||"DD.MM.YYYY"))+"\n    ")]):e._e(),e._v(" "),e.isReply||!e.authenticatedUser.isLoggedIn&&!e.options.allowGuestFeedbacks?e._e():t("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyFormVisible=!e.replyFormVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.addComment"))+"\n    ")]),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&!e.replyListVisible?t("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.viewComments"))+" ("+e._s(e.feedbackData.replies.length)+")\n    ")]):e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?t("span",{staticClass:"feedback-info-segment btn btn-sm btn-default",on:{click:function(t){e.replyListVisible=!e.replyListVisible}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.hideComments"))+"\n    ")]):e._e()]),e._v(" "),e.replyFormVisible&&!e.isReply&&(e.authenticatedUser.isLoggedIn||e.options.allowGuestFeedbacks)?t("div",{staticClass:"feedback-add-reply"},[!e.authenticatedUser.isLoggedIn&&e.options.allowGuestFeedbacks?t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.authorName,expression:"authorName"}],staticClass:"form-control",attrs:{id:"author",type:"text",name:"author",placeholder:e.$translate("Feedback::Feedback.authorName"),disabled:e.authenticatedUser.limitReached||!e.authenticatedUser.hasPurchased},domProps:{value:e.authorName},on:{input:function(t){t.target.composing||(e.authorName=t.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.honeypot,expression:"honeypot"}],staticClass:"form-control",attrs:{id:"comment-textfield",type:"text",name:"comment-textfield"},domProps:{value:e.honeypot},on:{input:function(t){t.target.composing||(e.honeypot=t.target.value)}}})]):e._e(),e._v(" "),t("div",{staticClass:"form-group"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyMessage,expression:"replyMessage"}],staticClass:"form-control",attrs:{name:"message",rows:"3",placeholder:e.$translate("Feedback::Feedback.commentMessage")},domProps:{value:e.replyMessage},on:{input:function(t){t.target.composing||(e.replyMessage=t.target.value)}}})]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-appearance",attrs:{disabled:!e.replyMessage},on:{click:function(t){return e.createReply()}}},[e._v("\n      "+e._s(e.$translate("Feedback::Feedback.submitComment"))+"\n    ")])]):e._e(),e._v(" "),e.feedbackData.replies&&e.feedbackData.replies.length>0&&e.replyListVisible?t("div",{staticClass:"feedback-replies"},e._l(e.feedbackData.replies,(function(a){return t("feedback-list-entry",{key:a.id,attrs:{feedback:a,"is-reply":!0,"show-controls":e.showControls,classes:e.classes,styles:e.styles,options:e.options},on:{delete:function(t){return e.$emit("delete",t)}}})})),1):e._e()])};n._withStripped=!0;a(7327),a(1539),a(1249),a(4916),a(3123),a(9826);var s={name:"FeedbackComment",components:{"feedback-list-entry":a(9655).Z},props:{feedback:Object,isReply:Boolean,showControls:Boolean,classes:String,styles:String,options:Object},data:function(){return{authorName:"",replyMessage:"",replyFormVisible:!1,replyListVisible:!1,honeypot:"",feedbackData:{}}},computed:{variationAttributes:function(){if("variation"!==this.feedbackData.targetRelation.feedbackRelationType||this.feedbackData.targetRelation.targetRelationName.length<=0||!this.feedbackData.targetRelation.variationAttributes||!this.itemAttributes)return[];var e=this;return this.feedbackData.targetRelation.variationAttributes.map((function(t){var a=e.feedbackData.targetRelation.feedbackRelationTargetId;if(!Object.prototype.hasOwnProperty.call(e.itemAttributes,a)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a],t.attributeId)||!Object.prototype.hasOwnProperty.call(e.itemAttributes[a][t.attributeId],t.valueId))return null;var n=e.itemAttributes[a][t.attributeId][t.valueId];return{name:n.attributeName,value:n.attributeValue}})).filter((function(e){return null!==e}))},displayName:function(){var e=this.feedbackData.sourceRelation[0].sourceRelationLabel;return" "!==e?e.split(" ").map((function(e,t){return 0===t?e+" ":e.substr(0,1)+"."})).join(""):this.$translate("Feedback::Feedback.guestName")},message:function(){return this.feedbackData.feedbackComment?this.feedbackData.feedbackComment.comment.message:""},isPurchased:function(){return this.feedbackData.sourceRelation.find((function(e){return"orderItem"===e.feedbackRelationType}))},authenticatedUser:function(){return this.$store.state.feedback.authenticatedUser},itemAttributes:function(){return this.$store.state.feedback.itemAttributes}},created:function(){this.feedbackData=this.feedback},methods:{createReply:function(){if(this.replyMessage&&!(this.honeypot.length>0)){var e=this;$.ajax({type:"POST",url:"/rest/feedbacks/feedback/create",data:{authorName:this.authorName,message:this.replyMessage,targetId:this.feedbackData.id,type:"reply"},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){e.feedbackData.replies||(e.feedbackData.replies=[]),e.feedbackData.replies.unshift(t),e.replyMessage="",e.replyFormVisible=!1,e.replyListVisible=!0}})}}}},i=(0,a(1900).Z)(s,n,[],!1,null,null,null).exports}}]);
//# sourceMappingURL=feedback-4.min.js.map